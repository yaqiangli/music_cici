<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	<mapper namespace="com.cici.music.dao.PlayMusicDao">
	<select id="getForId"  parameterType="int"   resultType="com.cici.music.pojo.Song" >
		select song.sid,
		song.sname,
		song.song,
		songer.sname as songerName,
		song.lyric,
		song.img
	 from song,songer
	where song.songerid=songer.sid and
	song.sid=#{id}
	</select>
	
	<select id="getSingerAll" resultType="com.cici.music.pojo.Singer" parameterType="com.cici.music.pojo.Param">
		select songer.sid,
		songer.sname,
	songer.head
	
	from songer
 <if test="searchType!=1">
	order by songer.sid desc
	LIMIT #{start},
 	#{length}  
</if>
</select>



	<select id="getSongByType"  parameterType="com.cici.music.pojo.Param"   resultType="com.cici.music.pojo.Song" >
		select song.sid,
		song.sname,
		songer.sname as songerName,
		zhuanji.zname as zjName
		
	 from song,songer,zhuanji
	where song.songerid=songer.sid and zhuanji.zhujiid=song.zjid and
	song.type=#{searchParam}
	order by  song.fbtime
	limit #{start},#{length}
	</select>
	
	
	
<select id="getAlbumForSinger" parameterType="hashmap" resultType="com.cici.music.pojo.Album">
	select zhuanji.zhujiid as albumId,
	zhuanji.zname as aname,
	zhuanji.fxgs,
	zhuanji.fbtime,
	zhuanji.img
	from zhuanji
	where zhuanji.songerid=#{id}
	<if test="type==1">
	 limit 0,10
	</if>
</select>

<select id="getSongForSinger" parameterType="hashmap" resultType="com.cici.music.pojo.Song">
	select 
	sid,sname from song
	where song.songerid=#{id}
	<if test="type==1">
	 limit 0,50
	</if>
</select>

<select id="getSingerForId" resultType="com.cici.music.pojo.Singer">
select songer.sid,
songer.sname,
songer.sex,
songer.jieshao,
songer.head
from songer
 where songer.sid=#{0}
</select>
<select id="queryCollectForId" parameterType="com.cici.music.pojo.Collect" resultType="com.cici.music.pojo.Collect">
	select uid,sid
	from
	<if test="type==1">
		collectsong
	</if>
	<if test="type==2">
	collectzhuanji
	</if>
	where uid=#{uid} and sid=#{sid}
</select>
<select id="queryCollectAll" parameterType="com.cici.music.pojo.Collect" resultType="com.cici.music.pojo.Collect">
	select uid,sid,sctime
	from
	<if test="type==1">
		collectsong
	</if>
	<if test="type==2">
	collectzhuanji
	</if>
	where uid=#{uid} 
</select>

<insert id="insertConllectSong" parameterType="com.cici.music.pojo.Collect">
	insert into collectsong values(#{uid},#{sid},#{sctime})
</insert>
<insert id="insertConllectAlubm" parameterType="com.cici.music.pojo.Collect">
insert into collectzhuanji values(#{uid},#{sid},#{sctime})
</insert>
</mapper>